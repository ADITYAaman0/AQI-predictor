# =============================================================================
# AQI Predictor - Deployment Environment Variables
# =============================================================================
# Use this for cloud deployments (Render, Railway, Streamlit Cloud, etc.)
# Set these as environment variables in your hosting platform

# -----------------------------------------------------------------------------
# Database Configuration (REQUIRED for backend)
# -----------------------------------------------------------------------------

# PostgreSQL connection URL
# Format: postgresql://username:password@host:port/database
# 
# Examples:
# Render: postgresql://aqi_user:pass@dpg-xxx.oregon-postgres.render.com/aqi_predictor
# Supabase: postgresql://postgres:pass@db.xxx.supabase.co:5432/postgres
# Railway: postgresql://postgres:pass@containers-us-west-xxx.railway.app:7782/railway
DATABASE_URL=postgresql://user:password@host:port/database

# Alternative for Supabase (includes pooling)
# SUPABASE_DB_URL=postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres

# -----------------------------------------------------------------------------
# Redis Configuration (REQUIRED for caching & background jobs)
# -----------------------------------------------------------------------------

# Redis connection URL
# Format: redis://host:port/db or rediss://host:port/db (with TLS)
#
# Examples:
# Render: redis://red-xxx.oregon-redis.render.com:6379
# Upstash: rediss://default:xxx@us1-xxx.upstash.io:6379
# Railway: redis://default:pass@containers-us-west-xxx.railway.app:6379
REDIS_URL=redis://localhost:6379/0

# Alternative Upstash REST API (if Redis protocol blocked)
# UPSTASH_REDIS_REST_URL=https://xxx.upstash.io
# UPSTASH_REDIS_REST_TOKEN=your_token

# -----------------------------------------------------------------------------
# API Configuration
# -----------------------------------------------------------------------------

# Base URL for the FastAPI backend (for dashboard to connect)
# Examples:
# Render: https://aqi-api.onrender.com
# Railway: https://aqi-api.up.railway.app
# Local: http://localhost:8000
API_URL=http://localhost:8000

# Dashboard URL (for keep-alive pings)
# Examples:
# Streamlit Cloud: https://yourapp.streamlit.app
# Render: https://aqi-dashboard.onrender.com
DASHBOARD_URL=http://localhost:8501

# -----------------------------------------------------------------------------
# External API Keys
# -----------------------------------------------------------------------------

# OpenWeatherMap API Key (REQUIRED for weather data)
# Get free key at: https://openweathermap.org/api
OPENWEATHERMAP_API_KEY=your_openweathermap_api_key_here

# OpenAQ API Key (OPTIONAL - public data available without key)
# Get key at: https://openaq.org for higher rate limits
OPENAQ_API_KEY=

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------

# Environment: development, staging, production
ENVIRONMENT=production

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Secret key for JWT tokens (generate random string)
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-change-this-in-production

# CORS origins (comma-separated)
# Allow dashboard to call API
CORS_ORIGINS=http://localhost:8501,https://yourapp.streamlit.app

# -----------------------------------------------------------------------------
# Feature Flags (Optional - enable/disable features)
# -----------------------------------------------------------------------------

# Enable background data ingestion (true/false)
ENABLE_BACKGROUND_INGESTION=true

# Enable email alerts (true/false)
ENABLE_EMAIL_ALERTS=false

# Enable ML predictions (true/false)
ENABLE_ML_PREDICTIONS=true

# Enable satellite data processing (true/false - heavy, disable for free tier)
ENABLE_SATELLITE_DATA=false

# Enable MLflow tracking (true/false - disable for free tier)
ENABLE_MLFLOW=false

# -----------------------------------------------------------------------------
# Performance Settings (for free tier optimization)
# -----------------------------------------------------------------------------

# Database connection pool size (reduce for free tier)
DB_POOL_SIZE=2
DB_MAX_OVERFLOW=0

# Redis connection pool size
REDIS_POOL_SIZE=5

# Celery worker concurrency (reduce for free tier)
CELERY_CONCURRENCY=2

# API request timeout (seconds)
API_TIMEOUT=30

# Cache TTL (seconds)
CACHE_TTL=300

# -----------------------------------------------------------------------------
# Monitoring & Observability (Optional)
# -----------------------------------------------------------------------------

# OpenTelemetry endpoint (optional)
# OTLP_ENDPOINT=http://jaeger:4317

# Sentry DSN for error tracking (optional)
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# Prometheus metrics port
# METRICS_PORT=9090

# -----------------------------------------------------------------------------
# Email Alerts (Optional)
# -----------------------------------------------------------------------------

# SMTP settings for alerts
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
ALERT_EMAIL=recipient@example.com
ALERT_THRESHOLD=150

# -----------------------------------------------------------------------------
# Platform-Specific Settings
# -----------------------------------------------------------------------------

# Render.com
# PORT is automatically set by Render
# DATABASE_URL and REDIS_URL can be linked from services

# Railway.app
# Most variables auto-populated from plugins
# Custom domains: RAILWAY_PUBLIC_DOMAIN

# Streamlit Cloud
# Set in "Secrets" section of dashboard (TOML format):
# [database]
# url = "postgresql://..."
# [api]
# url = "https://..."

# Vercel
# Set in project settings â†’ Environment Variables
# POSTGRES_URL and REDIS_URL from Vercel Storage

# Heroku
# Set with: heroku config:set VAR=value
# DATABASE_URL auto-set by postgres addon

# -----------------------------------------------------------------------------
# Security (IMPORTANT!)
# -----------------------------------------------------------------------------

# NEVER commit this file with real values to version control!
# Add .env to .gitignore
# Use platform-specific secret management for production

# For Render: Use environment variables in dashboard
# For Railway: Use Variables section
# For Streamlit: Use Secrets management (TOML format)
# For Vercel: Use Environment Variables in project settings

# Generate secure random values:
# SECRET_KEY=$(openssl rand -hex 32)
# JWT_SECRET=$(openssl rand -base64 32)
