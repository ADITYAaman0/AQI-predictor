# Complete Step-by-Step Implementation Guide (Part 2)
## Steps 5-10: Advanced Features, Backend Integration, and Deployment

---

## STEP 5: Add Interactive Features

### 5.1 Add Search Functionality

Add this to your HTML inside the control panel:

```html
<!-- Add to control-panel div -->
<div class="control-group">
    <label for="location-search">Search Location:</label>
    <input type="text" 
           id="location-search" 
           placeholder="Search address or landmark..."
           autocomplete="off">
    <div id="search-results" class="search-results"></div>
</div>
```

Add CSS for search:

```css
/* Add to styles.css */
#location-search {
    width: 100%;
    padding: 8px;
    border: 2px solid #bdc3c7;
    border-radius: 5px;
    font-size: 13px;
}

#location-search:focus {
    outline: none;
    border-color: #3498db;
}

.search-results {
    max-height: 200px;
    overflow-y: auto;
    background: white;
    border: 1px solid #ecf0f1;
    border-radius: 4px;
    margin-top: 5px;
    display: none;
}

.search-results.active {
    display: block;
}

.search-result-item {
    padding: 10px;
    cursor: pointer;
    border-bottom: 1px solid #ecf0f1;
}

.search-result-item:hover {
    background: #ecf0f1;
}

.search-result-item:last-child {
    border-bottom: none;
}
```

Add search JavaScript to map.js:

```javascript
// Add to setupEventListeners() function
document.getElementById('location-search').addEventListener('input', debounce(handleSearch, 300));

/**
 * Handle location search
 * @param {Event} e - Input event
 */
async function handleSearch(e) {
    const query = e.target.value.trim();
    const resultsDiv = document.getElementById('search-results');
    
    if (query.length < 3) {
        resultsDiv.classList.remove('active');
        return;
    }
    
    try {
        // Use Nominatim API (free OpenStreetMap geocoding)
        const response = await fetch(
            `https://nominatim.openstreetmap.org/search?` +
            `format=json&q=${encodeURIComponent(query)},Delhi NCR&limit=5`
        );
        
        const results = await response.json();
        
        if (results.length === 0) {
            resultsDiv.innerHTML = '<div class="search-result-item">No results found</div>';
            resultsDiv.classList.add('active');
            return;
        }
        
        resultsDiv.innerHTML = results.map(result => `
            <div class="search-result-item" 
                 data-lat="${result.lat}" 
                 data-lon="${result.lon}"
                 onclick="flyToLocation(${result.lat}, ${result.lon}, '${result.display_name}')">
                <strong>${result.display_name.split(',')[0]}</strong><br>
                <small>${result.display_name}</small>
            </div>
        `).join('');
        
        resultsDiv.classList.add('active');
        
    } catch (error) {
        console.error('Search error:', error);
    }
}

/**
 * Fly to selected location
 * @param {number} lat - Latitude
 * @param {number} lon - Longitude
 * @param {string} name - Location name
 */
function flyToLocation(lat, lon, name) {
    map.flyTo([lat, lon], 14, {
        duration: 1.5
    });
    
    // Add a temporary marker
    const marker = L.marker([lat, lon])
        .addTo(map)
        .bindPopup(`<strong>${name}</strong>`)
        .openPopup();
    
    // Remove marker after 5 seconds
    setTimeout(() => {
        map.removeLayer(marker);
    }, 5000);
    
    // Hide search results
    document.getElementById('search-results').classList.remove('active');
    document.getElementById('location-search').value = '';
}
```

### 5.2 Add Download/Export Functionality

Add export button to HTML:

```html
<!-- Add to control-panel -->
<div class="control-group">
    <button id="btn-export" class="btn-export">üì• Export Data (CSV)</button>
</div>
```

Add CSS:

```css
.btn-export {
    width: 100%;
    padding: 10px;
    background: #27ae60;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 13px;
    font-weight: 600;
    transition: background 0.3s ease;
}

.btn-export:hover {
    background: #229954;
}
```

Add export functionality:

```javascript
// Add to setupEventListeners()
document.getElementById('btn-export').addEventListener('click', exportDataToCSV);

/**
 * Export current data to CSV
 */
async function exportDataToCSV() {
    try {
        const data = await DataLoader.fetchCurrentAQI('all');
        
        // Convert GeoJSON to CSV
        const headers = ['Station ID', 'Station Name', 'District', 'Latitude', 'Longitude', 
                        'AQI', 'PM2.5', 'PM10', 'NO2', 'Category', 'Timestamp'];
        
        const rows = data.features.map(feature => {
            const coords = feature.geometry.coordinates;
            const props = feature.properties;
            
            return [
                props.station_id,
                props.station_name,
                props.district,
                coords[1],
                coords[0],
                props.aqi,
                props.pm25,
                props.pm10,
                props.no2 || 'N/A',
                props.category,
                props.timestamp
            ];
        });
        
        // Create CSV content
        let csvContent = headers.join(',') + '\n';
        rows.forEach(row => {
            csvContent += row.join(',') + '\n';
        });
        
        // Download CSV
        const blob = new Blob([csvContent], { type: 'text/csv' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `aqi-data-${new Date().toISOString().split('T')[0]}.csv`;
        a.click();
        window.URL.revokeObjectURL(url);
        
        alert('Data exported successfully!');
        
    } catch (error) {
        showError('Failed to export data: ' + error.message);
    }
}
```

### 5.3 Add Screenshot/Print Functionality

Add button:

```html
<button id="btn-screenshot" class="btn-export">üì∑ Save Map Image</button>
```

Add library to HTML head:

```html
<!-- Add before your custom JS -->
<script src="https://cdn.jsdelivr.net/npm/leaflet-easyprint@2.1.9/dist/bundle.js"></script>
```

Add functionality:

```javascript
// Add to initMap() function
L.easyPrint({
    title: 'Save map as image',
    position: 'topleft',
    sizeModes: ['Current', 'A4Portrait', 'A4Landscape'],
    filename: 'aqi-map',
    exportOnly: true,
    hideControlContainer: true
}).addTo(map);
```

---

## STEP 6: Implement 24-Hour Forecast Animation

The basic animation is already in place, but let's enhance it:

### 6.1 Add Time Display Overlay

Add to HTML:

```html
<div id="time-overlay" class="time-overlay" style="display: none;">
    <div class="time-display">
        <div class="current-time">
            <span id="forecast-time">Now</span>
        </div>
        <div class="time-indicator">
            <span id="forecast-date">Feb 5, 2026 14:00</span>
        </div>
    </div>
</div>
```

Add CSS:

```css
.time-overlay {
    position: absolute;
    top: 50%;
    left: 20px;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 20px;
    border-radius: 10px;
    z-index: 1000;
}

.time-display {
    text-align: center;
}

.current-time {
    font-size: 32px;
    font-weight: bold;
    margin-bottom: 10px;
}

.time-indicator {
    font-size: 14px;
    opacity: 0.8;
}
```

### 6.2 Enhanced Animation Logic

Update the `updateForecastHour` function:

```javascript
/**
 * Update forecast to specific hour (enhanced version)
 * @param {number} hour - Hour offset (0-24)
 */
async function updateForecastHour(hour) {
    currentHour = hour;
    
    // Update time overlay
    const timeOverlay = document.getElementById('time-overlay');
    const forecastTime = document.getElementById('forecast-time');
    const forecastDate = document.getElementById('forecast-date');
    
    if (hour === 0) {
        forecastTime.textContent = 'Now';
        timeOverlay.style.display = 'none';
    } else {
        forecastTime.textContent = `+${hour} hour${hour > 1 ? 's' : ''}`;
        
        // Calculate future time
        const futureDate = new Date();
        futureDate.setHours(futureDate.getHours() + hour);
        
        forecastDate.textContent = futureDate.toLocaleString('en-IN', {
            month: 'short',
            day: 'numeric',
            year: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
        });
        
        timeOverlay.style.display = 'block';
    }
    
    // Load forecast data
    await loadForecastData(hour);
}
```

### 6.3 Add Animation Speed Control

Add to HTML forecast controls:

```html
<div class="control-group">
    <label for="animation-speed">Animation Speed:</label>
    <select id="animation-speed">
        <option value="500">Fast (0.5s)</option>
        <option value="1000">Normal (1s)</option>
        <option value="1500" selected>Slow (1.5s)</option>
        <option value="2000">Very Slow (2s)</option>
    </select>
</div>
```

Update animation functions:

```javascript
let animationSpeed = 1500; // Default speed

// Add to setupEventListeners()
document.getElementById('animation-speed').addEventListener('change', (e) => {
    animationSpeed = parseInt(e.target.value);
    if (animationInterval) {
        // Restart animation with new speed
        stopAnimation();
        startAnimation();
    }
});

// Update startAnimation function
function startAnimation() {
    if (animationInterval) return;
    
    document.getElementById('btn-play').disabled = true;
    document.getElementById('btn-pause').disabled = false;
    
    animationInterval = setInterval(() => {
        currentHour = (currentHour + 1) % 25;
        document.getElementById('hour-slider').value = currentHour;
        updateForecastHour(currentHour);
    }, animationSpeed); // Use variable speed
}
```

---

## STEP 7: Add Source Attribution Visualization

Source attribution is already in popups, but let's add a summary panel:

### 7.1 Add Source Summary Panel

Add to HTML:

```html
<div id="source-panel" class="source-panel">
    <h4>Regional Source Attribution</h4>
    <div id="source-chart"></div>
    <div id="source-details"></div>
</div>
```

Add CSS:

```css
.source-panel {
    position: absolute;
    bottom: 30px;
    left: 20px;
    background: rgba(255, 255, 255, 0.95);
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    z-index: 1000;
    min-width: 300px;
    display: none; /* Hidden by default */
}

.source-panel.active {
    display: block;
}

.source-panel h4 {
    margin-bottom: 10px;
    color: #2c3e50;
    border-bottom: 2px solid #3498db;
    padding-bottom: 5px;
}

#source-chart {
    height: 120px;
    margin-bottom: 10px;
}
```

### 7.2 Calculate Regional Averages

Add to data-loader.js:

```javascript
/**
 * Calculate regional source attribution averages
 * @param {Object} data - GeoJSON feature collection
 * @returns {Object} - Average source contributions
 */
calculateRegionalSources(data) {
    const totals = {
        vehicular: 0,
        industrial: 0,
        biomass: 0,
        background: 0,
        count: 0
    };
    
    data.features.forEach(feature => {
        const props = feature.properties;
        totals.vehicular += props.source_vehicular;
        totals.industrial += props.source_industrial;
        totals.biomass += props.source_biomass;
        totals.background += props.source_background;
        totals.count++;
    });
    
    return {
        vehicular: Math.round(totals.vehicular / totals.count),
        industrial: Math.round(totals.industrial / totals.count),
        biomass: Math.round(totals.biomass / totals.count),
        background: Math.round(totals.background / totals.count)
    };
}
```

### 7.3 Display Source Chart

Add to map.js:

```javascript
/**
 * Update source attribution panel
 * @param {Object} data - Current AQI data
 */
function updateSourcePanel(data) {
    const sources = DataLoader.calculateRegionalSources(data);
    const panel = document.getElementById('source-panel');
    
    // Create bar chart
    document.getElementById('source-chart').innerHTML = `
        <div class="source-bar">
            <div class="source-segment" 
                 style="width: ${sources.vehicular}%; background: #e74c3c;"
                 title="Vehicular: ${sources.vehicular}%"></div>
            <div class="source-segment" 
                 style="width: ${sources.industrial}%; background: #f39c12;"
                 title="Industrial: ${sources.industrial}%"></div>
            <div class="source-segment" 
                 style="width: ${sources.biomass}%; background: #27ae60;"
                 title="Biomass: ${sources.biomass}%"></div>
            <div class="source-segment" 
                 style="width: ${sources.background}%; background: #95a5a6;"
                 title="Background: ${sources.background}%"></div>
        </div>
    `;
    
    // Create details
    document.getElementById('source-details').innerHTML = `
        <div style="font-size: 12px; margin-top: 10px;">
            <div style="margin-bottom: 5px;">
                <strong>üöó Vehicular:</strong> ${sources.vehicular}%
            </div>
            <div style="margin-bottom: 5px;">
                <strong>üè≠ Industrial:</strong> ${sources.industrial}%
            </div>
            <div style="margin-bottom: 5px;">
                <strong>üî• Biomass Burning:</strong> ${sources.biomass}%
            </div>
            <div>
                <strong>üå´Ô∏è Background:</strong> ${sources.background}%
            </div>
        </div>
    `;
    
    panel.classList.add('active');
}

// Call this in loadCurrentData() after loading data
updateSourcePanel(data);
```

---

## STEP 8: Connect to Backend API

### 8.1 Create Backend API (Python FastAPI)

Create `backend/api/main.py`:

```python
from fastapi import FastAPI, HTTPException, Query
from fastapi.middleware.cors import CORSMiddleware
from datetime import datetime, timedelta
from typing import Optional
import json

app = FastAPI(title="AQI Forecasting API", version="1.0.0")

# Enable CORS
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # In production, specify your frontend URL
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# Sample data (replace with your database/ML model)
def get_sample_stations():
    """Get sample AQI station data"""
    return [
        {
            "station_id": "DEL001",
            "station_name": "Anand Vihar",
            "district": "East Delhi",
            "coordinates": [77.2090, 28.6139],
            "aqi": 285,
            "pm25": 165.5,
            "pm10": 280.3,
            "no2": 45.2,
            "category": "Very Unhealthy",
            "timestamp": datetime.now().isoformat(),
            "sources": {
                "vehicular": 45,
                "industrial": 20,
                "biomass": 25,
                "background": 10
            },
            "forecast": {
                "1h": 290,
                "6h": 310,
                "24h": 275
            }
        },
        # Add more stations...
    ]

def to_geojson(stations):
    """Convert station list to GeoJSON"""
    features = []
    for station in stations:
        features.append({
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": station["coordinates"]
            },
            "properties": {
                "station_id": station["station_id"],
                "station_name": station["station_name"],
                "district": station["district"],
                "aqi": station["aqi"],
                "pm25": station["pm25"],
                "pm10": station["pm10"],
                "no2": station.get("no2"),
                "category": station["category"],
                "timestamp": station["timestamp"],
                "source_vehicular": station["sources"]["vehicular"],
                "source_industrial": station["sources"]["industrial"],
                "source_biomass": station["sources"]["biomass"],
                "source_background": station["sources"]["background"],
                "forecast_1h": station["forecast"]["1h"],
                "forecast_6h": station["forecast"]["6h"],
                "forecast_24h": station["forecast"]["24h"]
            }
        })
    
    return {
        "type": "FeatureCollection",
        "features": features
    }

@app.get("/")
def root():
    """API root endpoint"""
    return {
        "message": "AQI Forecasting API",
        "version": "1.0.0",
        "endpoints": {
            "current": "/api/v1/predictions/current",
            "forecast": "/api/v1/predictions/forecast",
            "grid": "/api/v1/predictions/grid",
            "station": "/api/v1/predictions/station/{station_id}"
        }
    }

@app.get("/api/v1/predictions/current")
def get_current_aqi(district: Optional[str] = Query("all", description="District filter")):
    """Get current AQI data for all stations"""
    stations = get_sample_stations()
    
    # Filter by district if specified
    if district != "all":
        stations = [s for s in stations if s["district"] == district]
    
    return to_geojson(stations)

@app.get("/api/v1/predictions/forecast")
def get_forecast(hour: int = Query(0, ge=0, le=24, description="Hour offset (0-24)")):
    """Get forecast data for specific hour"""
    stations = get_sample_stations()
    
    # Modify AQI based on hour (simulate forecast)
    import math
    for station in stations:
        # Diurnal variation
        hour_factor = math.sin((hour - 6) * math.pi / 12) * 0.3 + 1
        station["aqi"] = int(station["aqi"] * hour_factor)
        station["pm25"] = round(station["pm25"] * hour_factor, 1)
        station["pm10"] = round(station["pm10"] * hour_factor, 1)
    
    return to_geojson(stations)

@app.get("/api/v1/predictions/grid")
def get_grid_data():
    """Get 1km grid data for heatmap"""
    # This would come from your ML model
    # For now, return sample grid data
    
    import random
    features = []
    
    # Delhi-NCR bounds
    min_lon, max_lon = 76.8, 77.6
    min_lat, max_lat = 28.4, 28.9
    resolution = 0.009  # ~1km
    
    lon = min_lon
    while lon < max_lon:
        lat = min_lat
        while lat < max_lat:
            # Generate AQI with spatial correlation
            dist_from_center = ((lon - 77.2)**2 + (lat - 28.6)**2)**0.5
            base_aqi = 150 + (0.3 - dist_from_center) * 200
            aqi = max(50, min(500, base_aqi + random.randint(-80, 80)))
            
            features.append({
                "type": "Feature",
                "geometry": {
                    "type": "Point",
                    "coordinates": [lon, lat]
                },
                "properties": {
                    "aqi": int(aqi),
                    "grid_id": f"{lon:.3f}_{lat:.3f}"
                }
            })
            
            lat += resolution
        lon += resolution
    
    return {
        "type": "FeatureCollection",
        "features": features
    }

@app.get("/api/v1/predictions/station/{station_id}")
def get_station_detail(station_id: str):
    """Get detailed data for specific station"""
    stations = get_sample_stations()
    
    for station in stations:
        if station["station_id"] == station_id:
            return station
    
    raise HTTPException(status_code=404, detail="Station not found")

@app.get("/health")
def health_check():
    """Health check endpoint"""
    return {"status": "healthy", "timestamp": datetime.now().isoformat()}

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

### 8.2 Create requirements.txt

Create `backend/requirements.txt`:

```txt
fastapi==0.104.1
uvicorn[standard]==0.24.0
python-multipart==0.0.6
pydantic==2.5.0
```

### 8.3 Run Backend Server

```bash
# Install dependencies
cd backend
pip install -r requirements.txt

# Run server
python api/main.py

# Server will start at http://localhost:8000
# API docs at http://localhost:8000/docs
```

### 8.4 Update Frontend to Use Real API

In `data-loader.js`, change:

```javascript
const DataLoader = {
    API_BASE_URL: 'http://localhost:8000/api/v1',  // Your backend URL
    USE_SAMPLE_DATA: false,  // Switch to real API
    
    // Rest of the code remains the same...
};
```

---

## STEP 9: Mobile Optimization

### 9.1 Enhanced Mobile CSS

Already included in styles.css, but add these enhancements:

```css
/* Enhanced Mobile Styles */
@media (max-width: 768px) {
    /* Touch-friendly controls */
    .btn-toggle,
    button,
    select {
        min-height: 44px; /* iOS touch target size */
    }
    
    /* Simplified layout */
    .header-panel h1 {
        font-size: 14px;
    }
    
    .header-panel p {
        font-size: 11px;
    }
    
    /* Collapsible controls */
    .control-panel {
        max-height: 200px;
        transition: max-height 0.3s ease;
    }
    
    .control-panel.collapsed {
        max-height: 50px;
        overflow: hidden;
    }
    
    /* Simplified legend */
    .legend {
        font-size: 11px;
    }
    
    .legend-color {
        width: 15px;
        height: 15px;
    }
}

/* Very small screens */
@media (max-width: 480px) {
    .forecast-controls {
        padding: 10px;
    }
    
    .timeline-controls button {
        padding: 6px 10px;
        font-size: 11px;
    }
}
```

### 9.2 Add Touch Gestures

Add to map.js:

```javascript
// Detect mobile device
const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

if (isMobile) {
    // Disable double-click zoom (interferes with touch)
    map.doubleClickZoom.disable();
    
    // Add touch-friendly controls
    map.touchZoom.enable();
    map.touchRotate.enable();
    
    // Simplify UI on mobile
    document.querySelector('.control-panel').classList.add('mobile');
}
```

---

## STEP 10: Testing & Deployment

### 10.1 Testing Checklist

Create `testing-checklist.md`:

```markdown
# Testing Checklist

## Functional Testing
- [ ] Map loads within 3 seconds
- [ ] All markers display correctly
- [ ] Heatmap renders properly
- [ ] Popups show complete information
- [ ] District filter works
- [ ] Search functionality works
- [ ] Forecast animation runs smoothly
- [ ] Export to CSV works
- [ ] All buttons are functional

## Performance Testing
- [ ] Page load time < 3s
- [ ] API response time < 500ms
- [ ] Smooth animation with 1000 markers
- [ ] No memory leaks during animation
- [ ] Works on slow 3G connection

## Browser Compatibility
- [ ] Chrome (latest)
- [ ] Firefox (latest)
- [ ] Safari (latest)
- [ ] Edge (latest)
- [ ] Mobile Safari (iOS)
- [ ] Chrome Mobile (Android)

## Mobile Testing
- [ ] Responsive on phone (320px - 480px)
- [ ] Responsive on tablet (768px - 1024px)
- [ ] Touch gestures work
- [ ] Popups don't overflow screen
- [ ] Controls are accessible

## Data Validation
- [ ] AQI values in correct range (0-500)
- [ ] Colors match AQI categories
- [ ] Timestamps are current
- [ ] Source attribution sums to 100%
- [ ] Coordinates within Delhi-NCR bounds
```

### 10.2 Deployment Options

#### Option A: Static Hosting (GitHub Pages - FREE)

1. Create `.github/workflows/deploy.yml`:

```yaml
name: Deploy to GitHub Pages

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./frontend
```

2. Push to GitHub:

```bash
git init
git add .
git commit -m "Initial commit"
git branch -M main
git remote add origin https://github.com/yourusername/aqi-map.git
git push -u origin main
```

3. Enable GitHub Pages in repository settings

#### Option B: Vercel (FREE)

```bash
# Install Vercel CLI
npm install -g vercel

# Deploy
cd frontend
vercel

# Follow prompts
```

#### Option C: Netlify (FREE)

1. Create `netlify.toml`:

```toml
[build]
  publish = "frontend"

[[redirects]]
  from = "/api/*"
  to = "http://your-backend-url.com/api/:splat"
  status = 200
```

2. Deploy:

```bash
# Install Netlify CLI
npm install -g netlify-cli

# Deploy
netlify deploy --dir=frontend --prod
```

### 10.3 Backend Deployment (Render - FREE)

1. Create `render.yaml`:

```yaml
services:
  - type: web
    name: aqi-api
    env: python
    buildCommand: "pip install -r requirements.txt"
    startCommand: "uvicorn api.main:app --host 0.0.0.0 --port $PORT"
    envVars:
      - key: PYTHON_VERSION
        value: 3.11
```

2. Push to GitHub and connect to Render.com

### 10.4 Environment Configuration

Create `.env.example`:

```env
# Backend API URL
VITE_API_URL=https://your-api.render.com

# Optional: Analytics
VITE_ANALYTICS_ID=your-analytics-id

# Optional: Error tracking
VITE_SENTRY_DSN=your-sentry-dsn
```

### 10.5 Production Build

Create `package.json`:

```json
{
  "name": "aqi-forecasting-platform",
  "version": "1.0.0",
  "scripts": {
    "dev": "python -m http.server 8080",
    "build": "echo 'No build step needed for static site'",
    "test": "echo 'Tests not yet implemented'"
  }
}
```

---

## Final Deployment Steps

### 1. Prepare for Production

```bash
# Minify CSS
npx clean-css-cli -o frontend/css/styles.min.css frontend/css/styles.css

# Update HTML to use minified CSS
# <link rel="stylesheet" href="css/styles.min.css">
```

### 2. Configure API URL

Update `data-loader.js`:

```javascript
const DataLoader = {
    API_BASE_URL: window.location.hostname === 'localhost' 
        ? 'http://localhost:8000/api/v1'
        : 'https://your-api.render.com/api/v1',
    
    USE_SAMPLE_DATA: window.location.hostname === 'localhost',
    // ...
};
```

### 3. Add Analytics (Optional)

Add Google Analytics to HTML head:

```html
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=YOUR-ID"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'YOUR-ID');
</script>
```

### 4. Final Checklist

- [ ] Update API URLs
- [ ] Test on production
- [ ] Enable HTTPS
- [ ] Set up monitoring
- [ ] Configure backups
- [ ] Add error logging
- [ ] Set up CI/CD
- [ ] Update documentation

---

## Congratulations! üéâ

You now have a fully functional, free, open-source AQI forecasting platform!

### What You've Built:

‚úÖ Interactive map with Delhi-NCR focus  
‚úÖ Real-time AQI monitoring stations  
‚úÖ Heatmap visualization  
‚úÖ 24-hour forecast animation  
‚úÖ Source attribution analysis  
‚úÖ Mobile-responsive design  
‚úÖ Search and filter functionality  
‚úÖ Data export capabilities  
‚úÖ Backend API with FastAPI  
‚úÖ Production-ready deployment  

### Total Cost: $0 üí∞

- Map tiles: FREE (OpenFreeMap)
- JavaScript library: FREE (Leaflet)
- Hosting: FREE (GitHub Pages/Vercel/Netlify)
- Backend: FREE (Render free tier)
- Domain: ~$10/year (optional)

### Next Steps:

1. Connect to real AQI data sources (CPCB API)
2. Implement ML forecasting model
3. Add user accounts and notifications
4. Expand to more cities
5. Mobile app development

**You're all set! Good luck with your AQI project! üåç**
